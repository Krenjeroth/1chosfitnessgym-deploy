import{Y as J,y as B,an as de,p as d,_ as T,h as W,c as g,o as c,d as M,r as b,H as I,m as C,I as y,e as Q,aa as X,v as L,l as R,n as N,ab as fe,L as ce,U as G,q as P,s as A,x as S,av as ge,aw as ve,a0 as j,J as V,f as E,t as F,a1 as _,a9 as x,W as U,A as ye,ax as me,V as be,ay as pe,j as he,w as $e,k as ke}from"./CmAaC7-r.js";const Ie={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},Se={base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}},we=(e,a,r=!0)=>{const l=J("form-events",void 0),n=J("form-group",void 0),f=J("form-inputs",void 0);n&&(!r||e!=null&&e.legend?n.inputId.value=void 0:e!=null&&e.id&&(n.inputId.value=e==null?void 0:e.id),f&&(f.value[n.name.value]=n.inputId.value));const t=B(!1);function v(i,s){l&&l.emit({type:i,path:s})}function h(){v("blur",n==null?void 0:n.name.value),t.value=!0}function $(){v("change",n==null?void 0:n.name.value)}const m=de(()=>{(t.value||n!=null&&n.eagerValidation.value)&&v("input",n==null?void 0:n.name.value)},300);return{inputId:d(()=>(e==null?void 0:e.id)??(n==null?void 0:n.inputId.value)),name:d(()=>(e==null?void 0:e.name)??(n==null?void 0:n.name.value)),size:d(()=>{var s;const i=a.size[n==null?void 0:n.size.value]?n==null?void 0:n.size.value:null;return(e==null?void 0:e.size)??i??((s=a.default)==null?void 0:s.size)}),color:d(()=>{var i;return(i=n==null?void 0:n.error)!=null&&i.value?"red":e==null?void 0:e.color}),emitFormBlur:h,emitFormInput:m,emitFormChange:$}},k=L(S.ui.strategy,S.ui.input,ge),ze=W({components:{UIcon:X},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>k.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(k.size).includes(e)}},color:{type:String,default:()=>k.default.color,validator(e){return[...S.ui.colors,...Object.keys(k.color)].includes(e)}},variant:{type:String,default:()=>k.default.variant,validator(e){return[...Object.keys(k.variant),...Object.values(k.color).flatMap(a=>Object.keys(a))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:a,slots:r}){const{ui:l,attrs:n}=R("input",N(e,"ui"),k,N(e,"class")),{size:f,rounded:t}=fe({ui:l,props:e}),{emitFormBlur:v,emitFormInput:h,size:$,color:m,inputId:i,name:s}=we(e,k),u=d(()=>f.value??$.value),p=B(ce({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),O=B(null),w=()=>{var o;e.autofocus&&((o=O.value)==null||o.focus())},Z=o=>{p.value.trim&&(o=o.trim()),(p.value.number||e.type==="number")&&(o=ve(o)),p.value.nullify&&(o||(o=null)),a("update:modelValue",o),h()},ee=o=>{p.value.lazy||Z(o.target.value)},ae=o=>{if(e.type==="file"){const z=o.target.files;a("change",z)}else{const z=o.target.value;a("change",z),p.value.lazy&&Z(z),p.value.trim&&(o.target.value=z.trim())}},ne=o=>{v(),a("blur",o)};G(()=>{setTimeout(()=>{w()},e.autofocusDelay)});const le=d(()=>{var z,K;const o=((K=(z=l.value.color)==null?void 0:z[m.value])==null?void 0:K[e.variant])||l.value.variant[e.variant];return P(A(l.value.base,l.value.form,t.value,l.value.placeholder,e.type==="file"&&l.value.file.base,l.value.size[u.value],e.padded?l.value.padding[u.value]:"p-0",o==null?void 0:o.replaceAll("{color}",m.value),(q.value||r.leading)&&l.value.leading.padding[u.value],(H.value||r.trailing)&&l.value.trailing.padding[u.value]),e.inputClass)}),q=d(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),H=d(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),re=d(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),te=d(()=>e.loading&&!q.value?e.loadingIcon:e.trailingIcon||e.icon),ie=d(()=>A(l.value.icon.leading.wrapper,l.value.icon.leading.pointer,l.value.icon.leading.padding[u.value])),se=d(()=>A(l.value.icon.base,m.value&&S.ui.colors.includes(m.value)&&l.value.icon.color.replaceAll("{color}",m.value),l.value.icon.size[u.value],e.loading&&l.value.icon.loading)),oe=d(()=>A(l.value.icon.trailing.wrapper,l.value.icon.trailing.pointer,l.value.icon.trailing.padding[u.value])),ue=d(()=>A(l.value.icon.base,m.value&&S.ui.colors.includes(m.value)&&l.value.icon.color.replaceAll("{color}",m.value),l.value.icon.size[u.value],e.loading&&!q.value&&l.value.icon.loading));return{ui:l,attrs:n,name:s,inputId:i,input:O,isLeading:q,isTrailing:H,inputClass:le,leadingIconName:re,leadingIconClass:se,leadingWrapperIconClass:ie,trailingIconName:te,trailingIconClass:ue,trailingWrapperIconClass:oe,onInput:ee,onChange:ae,onBlur:ne}}}),Ce=["id","name","type","required","placeholder","disabled"];function je(e,a,r,l,n,f){const t=X;return c(),g("div",{class:y(e.type==="hidden"?"hidden":e.ui.wrapper)},[M("input",C({id:e.inputId,ref:"input",name:e.name,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.type==="file"?e.attrs:{...e.attrs,value:e.modelValue},{onInput:a[0]||(a[0]=(...v)=>e.onInput&&e.onInput(...v)),onBlur:a[1]||(a[1]=(...v)=>e.onBlur&&e.onBlur(...v)),onChange:a[2]||(a[2]=(...v)=>e.onChange&&e.onChange(...v))}),null,16,Ce),b(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(c(),g("span",{key:0,class:y(e.leadingWrapperIconClass)},[b(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[Q(t,{name:e.leadingIconName,class:y(e.leadingIconClass)},null,8,["name","class"])])],2)):I("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(c(),g("span",{key:1,class:y(e.trailingWrapperIconClass)},[b(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[Q(t,{name:e.trailingIconName,class:y(e.trailingIconClass)},null,8,["name","class"])])],2)):I("",!0)],2)}const Ge=T(ze,[["render",je]]),Y=L(S.ui.strategy,S.ui.formGroup,Ie),Be=W({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(Y.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:a,attrs:r}=R("formGroup",N(e,"ui"),Y,N(e,"class")),l=J("form-errors",null),n=d(()=>{var v,h;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(h=(v=l==null?void 0:l.value)==null?void 0:v.find($=>$.path===e.name))==null?void 0:h.message}),f=d(()=>a.value.size[e.size??Y.default.size]),t=B(x());return U("form-group",{error:n,inputId:t,name:d(()=>e.name),size:d(()=>e.size),eagerValidation:d(()=>e.eagerValidation)}),{ui:a,attrs:r,inputId:t,size:f,error:n}}}),Oe=["for"];function Ae(e,a,r,l,n,f){return c(),g("div",C({class:e.ui.wrapper},e.attrs),[M("div",{class:y(e.ui.inner)},[e.label||e.$slots.label?(c(),g("div",{key:0,class:y([e.ui.label.wrapper,e.size])},[M("label",{for:e.inputId,class:y([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?b(e.$slots,"label",j(C({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(V,{key:1},[E(F(e.label),1)],64))],10,Oe),e.hint||e.$slots.hint?(c(),g("span",{key:0,class:y([e.ui.hint])},[e.$slots.hint?b(e.$slots,"hint",j(C({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(V,{key:1},[E(F(e.hint),1)],64))],2)):I("",!0)],2)):I("",!0),e.description||e.$slots.description?(c(),g("p",{key:1,class:y([e.ui.description,e.size])},[e.$slots.description?b(e.$slots,"description",j(C({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(V,{key:1},[E(F(e.description),1)],64))],2)):I("",!0)],2),M("div",{class:y([e.label?e.ui.container:""])},[b(e.$slots,"default",j(_({error:e.error}))),typeof e.error=="string"&&e.error?(c(),g("p",{key:0,class:y([e.ui.error,e.size])},[e.$slots.error?b(e.$slots,"error",j(C({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(V,{key:1},[E(F(e.error),1)],64))],2)):e.help||e.$slots.help?(c(),g("p",{key:1,class:y([e.ui.help,e.size])},[e.$slots.help?b(e.$slots,"help",j(C({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(V,{key:1},[E(F(e.help),1)],64))],2)):I("",!0)],2)],16)}const Pe=T(Be,[["render",Ae]]);class D extends Error{constructor(a){super(a),this.message=a,Object.setPrototypeOf(this,D.prototype)}}const Ve=W({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:a,emit:r}){const l=x(),n=me(`form-${l}`),f=B(null);G(()=>{n.on(async i=>{var s;i.type!=="submit"&&((s=e.validateOn)!=null&&s.includes(i.type))&&await $(i.path,{silent:!0})})}),be(()=>{n.reset()});const t=B([]);U("form-errors",t),U("form-events",n);const v=B({});U("form-inputs",v);async function h(){let i=await e.validate(e.state);if(e.schema){const{errors:s,result:u}=await Re(e.state,e.schema);s?i=i.concat(s):f.value=u}return i}async function $(i,s={silent:!1}){let u=i;if(i&&!Array.isArray(i)&&(u=[i]),u){const p=t.value.filter(w=>!u.includes(w.path)),O=(await h()).filter(w=>u.includes(w.path));t.value=p.concat(O)}else t.value=await h();if(t.value.length>0){if(s.silent)return!1;throw new D(`Form validation failed: ${JSON.stringify(t.value,null,2)}`)}return e.state}async function m(i){var u;const s=i;try{(u=e.validateOn)!=null&&u.includes("submit")&&await $(),s.data=e.schema?f.value:e.state,r("submit",s)}catch(p){if(!(p instanceof D))throw p;const O={...s,errors:t.value.map(w=>({...w,id:v.value[w.path]}))};r("error",O)}}return a({validate:$,errors:t,setErrors(i,s){s?t.value=t.value.filter(u=>u.path!==s).concat(i):t.value=i},async submit(){await m(new Event("submit"))},getErrors(i){return i?t.value.filter(s=>s.path===i):t.value},clear(i){i?t.value=t.value.filter(s=>s.path!==i):t.value=[]}}),{onSubmit:m,errors:pe(t)}}});function Ee(e){return e.validate&&e.__isYupSchema__}function Fe(e){return e.inner!==void 0}function Ne(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function qe(e){return e.validateAsync!==void 0&&e.id!==void 0}function Je(e){return e.isJoi===!0}function Me(e){return"_parse"in e||"_run"in e||typeof e=="function"&&"schema"in e}function Ue(e){return e.parse!==void 0}async function De(e,a){const r=await("_parse"in a?a._parse(e):"_run"in a?a._run({typed:!1,value:e},{}):a(e));return!r.issues||r.issues.length===0?{errors:null,result:"output"in r?r.output:"value"in r?r.value:null}:{errors:r.issues.map(n=>{var f;return{path:((f=n.path)==null?void 0:f.map(t=>t.key).join("."))||"",message:n.message}}),result:null}}async function Te(e,a){try{return{errors:null,result:await a.validateAsync(e,{abortEarly:!1})}}catch(r){if(Je(r))return{errors:r.details.map(n=>({path:n.path.join("."),message:n.message})),result:null};throw r}}async function We(e,a){const r=await a.safeParseAsync(e);return r.success===!1?{errors:r.error.issues.map(n=>({path:n.path.join("."),message:n.message})),result:null}:{result:r.data,errors:null}}async function Ye(e,a){const[r,l]=a.validate(e);return r?{errors:r.failures().map(f=>({message:f.message,path:f.path.join(".")})),result:null}:{errors:null,result:l}}async function Le(e,a){try{return{errors:null,result:await a.validate(e,{abortEarly:!1})}}catch(r){if(Fe(r))return{errors:r.inner.map(n=>({path:n.path??"",message:n.message})),result:null};throw r}}function Re(e,a){if(Ue(a))return We(e,a);if(qe(a))return Te(e,a);if(Me(a))return De(e,a);if(Ee(a))return Le(e,a);if(Ne(a))return Ye(e,a);throw new Error("Form validation failed: Unsupported form schema")}function Ze(e,a,r,l,n,f){return c(),g("form",{onSubmit:a[0]||(a[0]=ye((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[b(e.$slots,"default",j(_({errors:e.errors})))],32)}const _e=T(Ve,[["render",Ze]]),He=L(S.ui.strategy,S.ui.card,Se),Ke=W({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:a,attrs:r}=R("card",N(e,"ui"),He),l=d(()=>P(A(a.value.base,a.value.rounded,a.value.divide,a.value.ring,a.value.shadow,a.value.background),e.class));return{ui:a,attrs:r,cardClass:l}}});function Qe(e,a,r,l,n,f){return c(),he(ke(e.$attrs.onSubmit?"form":e.as),C({class:e.cardClass},e.attrs),{default:$e(()=>[e.$slots.header?(c(),g("div",{key:0,class:y([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[b(e.$slots,"header")],2)):I("",!0),e.$slots.default?(c(),g("div",{key:1,class:y([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[b(e.$slots,"default")],2)):I("",!0),e.$slots.footer?(c(),g("div",{key:2,class:y([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[b(e.$slots,"footer")],2)):I("",!0)]),_:3},16,["class"])}const xe=T(Ke,[["render",Qe]]);export{xe as _,_e as a,Pe as b,Ge as c,we as u};
