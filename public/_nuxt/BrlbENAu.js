import{z as c,d as ot,_ as me,c as Vt,l as Mt,i as St,u as Ut,a as Ct}from"./upptak3D.js";import{m as Pt}from"./B7S8HNRx.js";import{v as ue,G as Dt,x as J,_ as jt,h as Y,c as N,o as C,r as Xe,H as I,f as F,I as K,e as o,w as r,d as j,t as ne,J as qt,K as zt,j as le,m as et,T as Et,l as rt,n as Q,p as P,L as $t,y as T,M as Gt,N as Nt,O as Tt,q as Bt,s as At,P as Lt,Q as It,F as kt,C as O,A as at,a as e,R,B as ce,b as Ft,D as Rt,E as ae}from"./CmAaC7-r.js";import{u as de,_ as nt,f as tt,a as lt}from"./CRJ-krNX.js";import{a as dt,b as st,c as it}from"./CxBsuVx0.js";import{_ as mt,a as Jt,u as ut}from"./moRlnmHh.js";import{u as Ot}from"./B_gzkPqb.js";const Yt={wrapper:{horizontal:"inline-flex -space-x-px",vertical:"inline-flex flex-col -space-y-px"},rounded:"rounded-md",shadow:"shadow-sm",orientation:{"rounded-none":{horizontal:{start:"rounded-s-none",end:"rounded-e-none"},vertical:{start:"rounded-t-none",end:"rounded-b-none"}},"rounded-sm":{horizontal:{start:"rounded-s-sm",end:"rounded-e-sm"},vertical:{start:"rounded-t-sm",end:"rounded-b-sm"}},rounded:{horizontal:{start:"rounded-s",end:"rounded-e"},vertical:{start:"rounded-t",end:"rounded-b"}},"rounded-md":{horizontal:{start:"rounded-s-md",end:"rounded-e-md"},vertical:{start:"rounded-t-md",end:"rounded-b-md"}},"rounded-lg":{horizontal:{start:"rounded-s-lg",end:"rounded-e-lg"},vertical:{start:"rounded-t-lg",end:"rounded-b-lg"}},"rounded-xl":{horizontal:{start:"rounded-s-xl",end:"rounded-e-xl"},vertical:{start:"rounded-t-xl",end:"rounded-b-xl"}},"rounded-2xl":{horizontal:{start:"rounded-s-2xl",end:"rounded-e-2xl"},vertical:{start:"rounded-t-2xl",end:"rounded-b-2xl"}},"rounded-3xl":{horizontal:{start:"rounded-s-3xl",end:"rounded-e-3xl"},vertical:{start:"rounded-t-3xl",end:"rounded-b-3xl"}},"rounded-full":{horizontal:{start:"rounded-s-full",end:"rounded-e-full"},vertical:{start:"rounded-t-full",end:"rounded-b-full"}}}},ie=ue(J.ui.strategy,J.ui.tooltip,Dt),Ht=Y({components:{UKbd:mt},inheritAttrs:!1,props:{text:{type:String,default:null},prevent:{type:Boolean,default:!1},shortcuts:{type:Array,default:()=>[]},openDelay:{type:Number,default:()=>ie.default.openDelay},closeDelay:{type:Number,default:()=>ie.default.closeDelay},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:m,attrs:u}=rt("tooltip",Q(t,"ui"),ie,Q(t,"class")),p=P(()=>$t({},t.popper,m.value.popper)),[q,s]=Jt(p.value),g=T(!1);let h=null,v=null;const w=P(()=>!!(Gt().text||t.text));function $(){v&&(clearTimeout(v),v=null),!g.value&&(h=h||setTimeout(()=>{g.value=!0,h=null},t.openDelay))}function S(){h&&(clearTimeout(h),h=null),g.value&&(v=v||setTimeout(()=>{g.value=!1,v=null},t.closeDelay))}return{ui:m,attrs:u,popper:p,trigger:q,container:s,open:g,onMouseEnter:$,onMouseLeave:S,isVisible:w}}});function Zt(t,m,u,p,q,s){const g=mt;return C(),N("div",et({ref:"trigger",class:t.ui.wrapper},t.attrs,{onMouseenter:m[0]||(m[0]=(...h)=>t.onMouseEnter&&t.onMouseEnter(...h)),onMouseleave:m[1]||(m[1]=(...h)=>t.onMouseLeave&&t.onMouseLeave(...h))}),[Xe(t.$slots,"default",{open:t.open},()=>[m[2]||(m[2]=F(" Hover "))]),t.open&&!t.prevent&&t.isVisible?(C(),N("div",{key:0,ref:"container",class:K([t.ui.container,t.ui.width])},[o(Et,et({appear:""},t.ui.transition),{default:r(()=>{var h;return[j("div",null,[t.popper.arrow?(C(),N("div",{key:0,"data-popper-arrow":"",class:K(Object.values(t.ui.arrow))},null,2)):I("",!0),j("div",{class:K([t.ui.base,t.ui.background,t.ui.color,t.ui.rounded,t.ui.shadow,t.ui.ring])},[Xe(t.$slots,"text",{},()=>[F(ne(t.text),1)]),(h=t.shortcuts)!=null&&h.length?(C(),N("span",{key:0,class:K(t.ui.shortcuts)},[j("span",{class:K(t.ui.middot)},"Â·",2),(C(!0),N(qt,null,zt(t.shortcuts,v=>(C(),le(g,{key:v,size:"xs"},{default:r(()=>[F(ne(v),1)]),_:2},1024))),128))],2)):I("",!0)],2)])]}),_:3},16)],2)):I("",!0)],16)}const ct=jt(Ht,[["render",Zt]]),Kt=ue(J.ui.strategy,J.ui.button,Nt),Qt=ue(J.ui.strategy,J.ui.buttonGroup,Yt),pt=Y({name:"ButtonGroup",inheritAttrs:!1,props:{size:{type:String,default:null,validator(t){return Object.keys(Kt.size).includes(t)}},orientation:{type:String,default:"horizontal",validator(t){return["horizontal","vertical"].includes(t)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t,{slots:m}){const{ui:u,attrs:p}=rt("buttonGroup",Q(t,"ui"),Qt),q=P(()=>Tt(m)),s=P(()=>Bt(At(u.value.wrapper[t.orientation],u.value.rounded,u.value.shadow),t.class)),g=P(()=>u.value.orientation[u.value.rounded][t.orientation]);return Lt({orientation:Q(t,"orientation"),size:Q(t,"size"),ui:u,rounded:g}),()=>It("div",{class:s.value,...p.value},q.value)}}),ft=["image/png","image/jpeg","image/jpg"],bt=2*1024*1024,Wt=c.object({prefix:c.string().regex(/^[A-Za-z]+$/,"Prefix must be alphabets only.").nullable().optional(),firstname:c.string({required_error:"First name is required"}).min(3,"First name must be at least 3 characters long").max(50,"First name must be at most 50 characters long"),middlename:c.string({required_error:"Middle name is required"}).min(3,"Middle name must be at least 3 characters long").max(50,"Middle name must be at most 50 characters long"),lastname:c.string({required_error:"Last name is required"}).min(3,"Last name must be at least 3 characters long").max(50,"Last name must be at most 50 characters long"),suffix:c.string().regex(/^[A-Za-z]+$/,"Suffix must be alphabets only.").nullable().optional(),email:c.string({required_error:"Email is required"}).email("Email is not valid"),phone:c.string({required_error:"Phone is required"}).refine(t=>{const m=/^(09\d{9}|\+639\d{9})$/,u=/^(0\d{9}|0\d{2}\d{7})$/;return m.test(t)||u.test(t)},{message:"Invalid Phone number format"}),gender:c.string({required_error:"Gender is required"}),date_of_birth:c.date({required_error:"Date of Birth is required"}),join_date:c.date({required_error:"Join Date is required"}),address:c.string({required_error:"Address is required"}).max(255,"Address must be at most 255 characters long"),emergency_contact_name:c.string({required_error:"Emergency Contact Name is required"}).min(3,"Emergency Contact Name must be 3 or more characters long").max(50,"Emergency Contact Name must be 50 or fewer characters long"),emergency_contact_phone:c.string({required_error:"Emergency Contact Phone is required"}).refine(t=>{const m=/^(09\d{9}|\+639\d{9})$/,u=/^(0\d{9}|0\d{2}\d{7})$/;return m.test(t)||u.test(t)},{message:"Invalid Phone number format"}),photo_id:c.custom().refine(t=>!t||ft.includes(t==null?void 0:t.type),{message:"Photo ID must be a PNG, JPEG, or JPG"}).refine(t=>!t||(t==null?void 0:t.size)<=bt,{message:"Photo ID must be less than 2MB"})}),_t=c.custom().refine(t=>!t||ft.includes(t==null?void 0:t.type),{message:"Photo ID must be a PNG, JPEG, or JPG"}).refine(t=>!t||(t==null?void 0:t.size)<=bt,{message:"Photo ID must be less than 2MB"}),Xt=()=>{const t=Ot();P(()=>new URL("http://1chosfitnessgym/api/genders"));const m=P(()=>new URL("http://1chosfitnessgym/api/gender-select"));return{getGenderSelectApi:async()=>await t(`${m.value}`)}},gt=kt("genderStore",()=>{const{getGenderSelectApi:t}=Xt();T([]);const m=T([]);return{genderSelect:m,getGenderSelect:async()=>{try{const p=await t();m.value=p.data}catch(p){console.log(p)}}}}),eo={class:"space-y-6 md:space-y-0 md:flex md:justify-between md:grid-cols-3"},to={class:"space-y-6 md:space-y-0 md:space-x-6 md:flex md:justify-between"},oo={class:"space-y-6 md:space-y-0 md:flex md:space-x-6"},ro={key:0,class:"mt-2 text-red-500 dark:text-red-400 text-sm"},ao=["src"],no={class:"space-y-6 md:space-y-0 md:flex md:justify-between md:space-x-6"},lo=Y({__name:"CreateModal",emits:["reloadTable","success","error","close"],setup(t,{emit:m}){const u=de(),p=gt(),{loading:q,errorBag:s,hasError:g}=O(u),{genderSelect:h}=O(p);p.getGenderSelect();const v=m,{capitalizeAll:w}=ut(),$=()=>v("close"),S=()=>{v("success"),v("reloadTable"),$()},a=()=>{v("error")},n=T({prefix:void 0,firstname:void 0,middlename:void 0,lastname:void 0,suffix:void 0,email:void 0,phone:void 0,gender:void 0,date_of_birth:void 0,join_date:void 0,address:void 0,emergency_contact_name:void 0,emergency_contact_phone:void 0,photo_id:null}),z=T(null),D=T(null),B=P({get:()=>n.value.prefix??void 0,set:b=>n.value.prefix=b||void 0}),A=P({get:()=>n.value.suffix??void 0,set:b=>n.value.suffix=b||void 0}),l=P({get:()=>n.value.address,set:b=>{n.value.address=w(b)}}),E=b=>{if(!b||b.length===0){n.value.photo_id=null,z.value=null,D.value=null;return}const i=b[0],x=_t.safeParse(i);if(!x.success){D.value=x.error.format()._errors[0]||"Invalid file.",z.value=null,n.value.photo_id=null;return}D.value=null,n.value.photo_id=i,z.value=URL.createObjectURL(i)},G=async b=>{if(await u.addMember(b.data),g.value){a();return}S()};return(b,i)=>{const x=it,V=st,L=ce,W=ct,X=pt,ee=ot,te=lt,H=nt,oe=dt,re=me;return C(),le(re,{"on-close":$,title:"Add Member",ui:{width:"md:max-w-3xl"}},{default:r(()=>[o(oe,{schema:"CreateMemberValidationSchema"in b?b.CreateMemberValidationSchema:e(Wt),state:e(n),onSubmit:at(G,["prevent"]),class:"space-y-6"},{default:r(()=>[j("div",eo,[o(V,{label:"Prefix",name:"prefix",error:e(s).prefix,ui:{wrapper:"md:w-12 md:max-w-12"}},{default:r(()=>[o(x,{modelValue:e(B),"onUpdate:modelValue":i[0]||(i[0]=f=>R(B)?B.value=f:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Firstname",name:"firstname",error:e(s).firstname,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(x,{modelValue:e(n).firstname,"onUpdate:modelValue":i[1]||(i[1]=f=>e(n).firstname=f)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Middlename",name:"middlename",error:e(s).middlename,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(x,{modelValue:e(n).middlename,"onUpdate:modelValue":i[2]||(i[2]=f=>e(n).middlename=f)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Lastname",name:"lastname",error:e(s).lastname,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(x,{modelValue:e(n).lastname,"onUpdate:modelValue":i[3]||(i[3]=f=>e(n).lastname=f)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Suffix",name:"suffix",error:e(s).suffix,ui:{wrapper:"md:w-12 md:max-w-12"}},{default:r(()=>[o(x,{modelValue:e(A),"onUpdate:modelValue":i[4]||(i[4]=f=>R(A)?A.value=f:null)},null,8,["modelValue"])]),_:1},8,["error"])]),j("div",to,[o(V,{label:"Email",name:"email",error:e(s).email,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(x,{modelValue:e(n).email,"onUpdate:modelValue":i[5]||(i[5]=f=>e(n).email=f)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Phone",name:"phone",error:e(s).phone,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(X,{orient:"horizontal",ui:{wrapper:{horizontal:"w-full"}}},{default:r(()=>[o(x,{modelValue:e(n).phone,"onUpdate:modelValue":i[6]||(i[6]=f=>e(n).phone=f),class:"flex-1"},null,8,["modelValue"]),o(W,{text:"Can accept Mobile Number or Landline Number",popper:{arrow:!0}},{default:r(()=>[o(L,{icon:"i-heroicons-information-circle",color:"yellow"})]),_:1})]),_:1})]),_:1},8,["error"]),o(V,{label:"Gender",name:"gender",error:e(s).gender,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(ee,{modelValue:e(n).gender,"onUpdate:modelValue":i[7]||(i[7]=f=>e(n).gender=f),options:e(h),"value-attribute":"id","option-attribute":"type",placeholder:"Select"},null,8,["modelValue","options"])]),_:1},8,["error"])]),j("div",oo,[o(V,{label:"Date of Birth",name:"date_of_birth",error:e(s).date_of_birth,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(H,{popper:{placement:"bottom-start"}},{panel:r(({close:f})=>[o(te,{modelValue:e(n).date_of_birth,"onUpdate:modelValue":i[8]||(i[8]=k=>e(n).date_of_birth=k),"is-required":"",onClose:f},null,8,["modelValue","onClose"])]),default:r(()=>[o(L,{icon:"i-heroicons-calendar-days-20-solid",label:e(n).date_of_birth?e(tt)(e(n).date_of_birth,"yyyy/MM/dd"):"Select Date",ui:{base:"w-full md:w-full"},variant:"outline"},null,8,["label"])]),_:1})]),_:1},8,["error"]),o(V,{label:"Join Date",name:"join_date",error:e(s).join_date,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(H,{popper:{placement:"bottom-start"}},{panel:r(({close:f})=>[o(te,{modelValue:e(n).join_date,"onUpdate:modelValue":i[9]||(i[9]=k=>e(n).join_date=k),"is-required":"",mode:"date",onClose:f},null,8,["modelValue","onClose"])]),default:r(()=>[o(L,{icon:"i-heroicons-calendar-days-20-solid",label:e(n).join_date?e(tt)(e(n).join_date,"yyyy/MM/dd"):"Select Date",ui:{base:"w-full md:w-full"},variant:"outline",color:"gray"},null,8,["label"])]),_:1})]),_:1},8,["error"]),o(V,{label:"Photo ID",name:"photo_id",error:e(s).photo_id,ui:{wrapper:"md:w-50"}},{default:r(()=>[o(x,{type:"file",accept:"image/png, image/jpeg, image/jpg",icon:"i-heroicons-photo",onChange:i[10]||(i[10]=f=>E(f)),multiple:!1}),e(D)?(C(),N("p",ro,ne(e(D)),1)):I("",!0)]),_:1},8,["error"]),e(z)&&!e(D)?(C(),N("img",{key:0,src:e(z),class:"w-24 h-24 rounded-full",alt:"Profile Preview"},null,8,ao)):I("",!0)]),o(V,{label:"Address",name:"address",error:e(s).address},{default:r(()=>[o(x,{modelValue:e(l),"onUpdate:modelValue":i[11]||(i[11]=f=>R(l)?l.value=f:null)},null,8,["modelValue"])]),_:1},8,["error"]),j("div",no,[o(V,{label:"Emergency Contact Name",name:"emergency_contact_name",error:e(s).emergency_contact_name,ui:{wrapper:"md:w-full"}},{default:r(()=>[o(x,{modelValue:e(n).emergency_contact_name,"onUpdate:modelValue":i[12]||(i[12]=f=>e(n).emergency_contact_name=f)},null,8,["modelValue"])]),_:1},8,["error"]),o(V,{label:"Emergency Contact Phone",name:"emergency_contact_phone",error:e(s).emergency_contact_phone,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(X,{orient:"horizontal",ui:{wrapper:{horizontal:"w-full"}}},{default:r(()=>[o(x,{modelValue:e(n).emergency_contact_phone,"onUpdate:modelValue":i[13]||(i[13]=f=>e(n).emergency_contact_phone=f),class:"flex-1"},null,8,["modelValue"]),o(W,{text:"Can accept Mobile Number or Landline Number",popper:{arrow:!0}},{default:r(()=>[o(L,{icon:"i-heroicons-information-circle",color:"yellow"})]),_:1})]),_:1})]),_:1},8,["error"])]),o(L,{type:"submit",variant:"outline",loading:e(q)},{default:r(()=>i[14]||(i[14]=[F(" Add ")])),_:1},8,["loading"])]),_:1},8,["schema","state"])]),_:1})}}}),ht=["image/png","image/jpeg","image/jpg"],vt=2*1024*1024,so=c.object({prefix:c.string().regex(/^[A-Za-z]+$/,"Prefix must be alphabets only.").nullable().optional(),firstname:c.string({required_error:"First name is required"}).min(3,"First name must be at least 3 characters long").max(50,"First name must be at most 50 characters long"),middlename:c.string({required_error:"Middle name is required"}).min(3,"Middle name must be at least 3 characters long").max(50,"Middle name must be at most 50 characters long"),lastname:c.string({required_error:"Last name is required"}).min(3,"Last name must be at least 3 characters long").max(50,"Last name must be at most 50 characters long"),suffix:c.string().regex(/^[A-Za-z]+$/,"Suffix must be alphabets only.").nullable().optional(),email:c.string({required_error:"Email is required"}).email("Email is not valid"),phone:c.string({required_error:"Phone is required"}).refine(t=>{const m=/^(09\d{9}|\+639\d{9})$/,u=/^(0\d{9}|0\d{2}\d{7})$/;return m.test(t)||u.test(t)},{message:"Invalid Phone number format"}),gender:c.union([c.number(),c.string()]),date_of_birth:c.date({required_error:"Date of Birth is required"}),join_date:c.date({required_error:"Join Date is required"}),address:c.string({required_error:"Address is required"}).max(255,"Address must be at most 255 characters long"),emergency_contact_name:c.string({required_error:"Emergency Contact Name is required"}).min(3,"Emergency Contact Name must be 3 or more characters long").max(50,"Emergency Contact Name must be 50 or fewer characters long"),emergency_contact_phone:c.string({required_error:"Emergency Contact Phone is required"}).refine(t=>{const m=/^(09\d{9}|\+639\d{9})$/,u=/^(0\d{9}|0\d{2}\d{7})$/;return m.test(t)||u.test(t)},{message:"Invalid Phone number format"}),photo_id:c.custom().refine(t=>!t||ht.includes(t==null?void 0:t.type),{message:"Photo ID must be a PNG, JPEG, or JPG"}).refine(t=>!t||(t==null?void 0:t.size)<=vt,{message:"Photo ID must be less than 2MB"})});c.custom().refine(t=>!t||ht.includes(t==null?void 0:t.type),{message:"Photo ID must be a PNG, JPEG, or JPG"}).refine(t=>!t||(t==null?void 0:t.size)<=vt,{message:"Photo ID must be less than 2MB"});const io={class:"space-y-6 md:space-y-0 md:flex md:justify-between md:grid-cols-3"},mo={class:"space-y-6 md:space-y-0 md:space-x-6 md:flex md:justify-between"},uo={class:"space-y-6 md:space-y-0 md:flex md:space-x-6"},co={key:0,class:"mt-2 text-red-500 dark:text-red-400 text-sm"},po=["src"],fo={class:"space-y-6 md:space-y-0 md:flex md:justify-between md:space-x-6"},bo=Y({__name:"UpdateModal",props:{member:Object},emits:["reloadTable","success","error","noDataChange","close"],setup(t,{emit:m}){var H,oe,re,f,k,pe,fe,be,_e,ge,he,ve,ye,we,xe,Ve,Me,Se,Ue,Ce,Pe,De,je,qe,ze,Ee,$e,Ge,Ne,Te,Be,Ae,Le,Ie,ke,Fe,Re,Je,Oe,Ye,He;const u=de(),p=gt(),{loading:q,errorBag:s,hasError:g}=O(u),{genderSelect:h}=O(p);p.getGenderSelect();const{capitalizeAll:v,strDeepSanitize:w}=ut(),{transformDatePickerDate:$,transformDbDate:S}=Vt(),a=t,n=m,z=()=>n("close"),D=()=>{n("success"),n("reloadTable"),z()},B=()=>{n("noDataChange")},A=()=>{n("error")},l=T({prefix:w((oe=(H=a.member)==null?void 0:H.name)==null?void 0:oe.prefix)||void 0,firstname:w((f=(re=a.member)==null?void 0:re.name)==null?void 0:f.firstname)??void 0,middlename:w((pe=(k=a.member)==null?void 0:k.name)==null?void 0:pe.middlename)??void 0,lastname:w((be=(fe=a.member)==null?void 0:fe.name)==null?void 0:be.lastname)??void 0,suffix:w((ge=(_e=a.member)==null?void 0:_e.name)==null?void 0:ge.suffix)||void 0,email:((he=a.member)==null?void 0:he.email)??void 0,phone:((ve=a.member)==null?void 0:ve.phone)??void 0,gender:(ye=a.member)!=null&&ye.gender_id?+a.member.gender_id:void 0,gender_id:((we=a.member)==null?void 0:we.gender_id)??void 0,date_of_birth:(xe=a.member)!=null&&xe.date_of_birth?S(a.member.date_of_birth):void 0,join_date:(Ve=a.member)!=null&&Ve.join_date?S(a.member.join_date):void 0,address:((Me=a.member)==null?void 0:Me.address)??void 0,emergency_contact_name:((Se=a.member)==null?void 0:Se.emergency_contact_name)??void 0,emergency_contact_phone:((Ue=a.member)==null?void 0:Ue.emergency_contact_phone)??void 0,img_path:((Ce=a.member)==null?void 0:Ce.img_path)??void 0,photo_id:null}),E=T(Mt.cloneDeep({prefix:w((De=(Pe=a.member)==null?void 0:Pe.name)==null?void 0:De.prefix)||void 0,firstname:w((qe=(je=a.member)==null?void 0:je.name)==null?void 0:qe.firstname)??void 0,middlename:w((Ee=(ze=a.member)==null?void 0:ze.name)==null?void 0:Ee.middlename)??void 0,lastname:w((Ge=($e=a.member)==null?void 0:$e.name)==null?void 0:Ge.lastname)??void 0,suffix:w((Te=(Ne=a.member)==null?void 0:Ne.name)==null?void 0:Te.suffix)||void 0,email:((Be=a.member)==null?void 0:Be.email)??void 0,phone:((Ae=a.member)==null?void 0:Ae.phone)??void 0,gender:(Le=a.member)!=null&&Le.gender_id?+a.member.gender_id:void 0,gender_id:((Ie=a.member)==null?void 0:Ie.gender_id)??void 0,date_of_birth:(ke=a.member)!=null&&ke.date_of_birth?S(a.member.date_of_birth):void 0,join_date:(Fe=a.member)!=null&&Fe.join_date?S(a.member.join_date):void 0,address:((Re=a.member)==null?void 0:Re.address)??void 0,emergency_contact_name:((Je=a.member)==null?void 0:Je.emergency_contact_name)??void 0,emergency_contact_phone:((Oe=a.member)==null?void 0:Oe.emergency_contact_phone)??void 0,img_path:((Ye=a.member)==null?void 0:Ye.img_path)??void 0,photo_id:null})),G=T(null),b=T(null),i=P({get:()=>l.value.prefix??void 0,set:M=>l.value.prefix=M||void 0}),x=P({get:()=>l.value.suffix??void 0,set:M=>l.value.suffix=M||void 0}),V=P({get:()=>l.value.address,set:M=>{l.value.address=v(M)}});G.value=((He=a.member)==null?void 0:He.img_path)??null;const L=M=>{if(!M||M.length===0){l.value.photo_id=null,G.value=null,b.value=null;return}const d=M[0],y=_t.safeParse(d);if(!y.success){b.value=y.error.format()._errors[0]||"Invalid file.",G.value=null,l.value.photo_id=null;return}b.value=null,l.value.photo_id=d,G.value=URL.createObjectURL(d)},W=["prefix","firstname","middlename","lastname","suffix","email","phone","gender","gender_id","date_of_birth","join_date","address","emergency_contact_name","emergency_contact_phone","img_path","photo_id"],X=["date_of_birth","join_date"],ee=P(()=>W.some(M=>{const d=l.value[M],y=E.value[M];return X.includes(M)?!d&&!y?!1:!d||!y?!0:new Date(d).getTime()!==new Date(y).getTime():!St(d,y)})),te=async M=>{var d;if(!ee.value){B();return}if(await u.updateMember((d=a.member)==null?void 0:d.id,M.data),g.value){A();return}D()};return(M,d)=>{const y=it,U=st,Z=ce,Ze=ct,Ke=pt,yt=ot,Qe=lt,We=nt,wt=dt,xt=me;return C(),le(xt,{"on-close":z,title:"Edit Member",ui:{width:"md:max-w-3xl"}},{default:r(()=>[o(wt,{schema:"UpdateMemberValidationSchema"in M?M.UpdateMemberValidationSchema:e(so),state:e(l),onSubmit:at(te,["prevent"]),class:"space-y-6"},{default:r(()=>[j("div",io,[o(U,{label:"Prefix",name:"prefix",error:e(s).prefix,ui:{wrapper:"md:w-12 md:max-w-12"}},{default:r(()=>[o(y,{modelValue:e(i),"onUpdate:modelValue":d[0]||(d[0]=_=>R(i)?i.value=_:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Firstname",name:"firstname",error:e(s).firstname,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(y,{modelValue:e(l).firstname,"onUpdate:modelValue":d[1]||(d[1]=_=>e(l).firstname=_)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Middlename",name:"middlename",error:e(s).middlename,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(y,{modelValue:e(l).middlename,"onUpdate:modelValue":d[2]||(d[2]=_=>e(l).middlename=_)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Lastname",name:"lastname",error:e(s).lastname,ui:{wrapper:"md:w-44 md:max-w-44"}},{default:r(()=>[o(y,{modelValue:e(l).lastname,"onUpdate:modelValue":d[3]||(d[3]=_=>e(l).lastname=_)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Suffix",name:"suffix",error:e(s).suffix,ui:{wrapper:"md:w-12 md:max-w-12"}},{default:r(()=>[o(y,{modelValue:e(x),"onUpdate:modelValue":d[4]||(d[4]=_=>R(x)?x.value=_:null)},null,8,["modelValue"])]),_:1},8,["error"])]),j("div",mo,[o(U,{label:"Email",name:"email",error:e(s).email,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(y,{modelValue:e(l).email,"onUpdate:modelValue":d[5]||(d[5]=_=>e(l).email=_)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Phone",name:"phone",error:e(s).phone,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(Ke,{orient:"horizontal",ui:{wrapper:{horizontal:"w-full"}}},{default:r(()=>[o(y,{modelValue:e(l).phone,"onUpdate:modelValue":d[6]||(d[6]=_=>e(l).phone=_),class:"flex-1"},null,8,["modelValue"]),o(Ze,{text:"Can accept Mobile Number or Landline Number",popper:{arrow:!0}},{default:r(()=>[o(Z,{icon:"i-heroicons-information-circle",color:"yellow"})]),_:1})]),_:1})]),_:1},8,["error"]),o(U,{label:"Gender",name:"gender",error:e(s).gender,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(yt,{modelValue:e(l).gender,"onUpdate:modelValue":d[7]||(d[7]=_=>e(l).gender=_),options:e(h),"value-attribute":"id","option-attribute":"type",placeholder:"Select"},null,8,["modelValue","options"])]),_:1},8,["error"])]),j("div",uo,[o(U,{label:"Date of Birth",name:"date_of_birth",error:e(s).date_of_birth,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(We,{popper:{placement:"bottom-start"}},{panel:r(({close:_})=>[o(Qe,{modelValue:e(l).date_of_birth,"onUpdate:modelValue":d[8]||(d[8]=se=>e(l).date_of_birth=se),"is-required":"",onClose:_},null,8,["modelValue","onClose"])]),default:r(()=>[o(Z,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).date_of_birth?e($)(e(l).date_of_birth,"MMM DD, YYYY"):"Select Date",ui:{base:"w-full md:w-full"},variant:"outline"},null,8,["label"])]),_:1})]),_:1},8,["error"]),o(U,{label:"Join Date",name:"join_date",error:e(s).join_date,ui:{wrapper:"md:w-1/5"}},{default:r(()=>[o(We,{popper:{placement:"bottom-start"}},{panel:r(({close:_})=>[o(Qe,{modelValue:e(l).join_date,"onUpdate:modelValue":d[9]||(d[9]=se=>e(l).join_date=se),"is-required":"",mode:"date",onClose:_},null,8,["modelValue","onClose"])]),default:r(()=>[o(Z,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).join_date?e($)(e(l).join_date,"MMM DD, YYYY"):"Select Date",ui:{base:"w-full md:w-full"},variant:"outline",color:"gray"},null,8,["label"])]),_:1})]),_:1},8,["error"]),o(U,{label:"Photo ID",name:"photo_id",error:e(s).photo_id,ui:{wrapper:"md:w-50"}},{default:r(()=>[o(y,{type:"file",accept:"image/png, image/jpeg, image/jpg",icon:"i-heroicons-photo",onChange:d[10]||(d[10]=_=>L(_)),multiple:!1}),e(b)?(C(),N("p",co,ne(e(b)),1)):I("",!0)]),_:1},8,["error"]),e(G)&&!e(b)?(C(),N("img",{key:0,src:e(G),class:"w-24 h-24 rounded-full",alt:"Profile Preview"},null,8,po)):I("",!0)]),o(U,{label:"Address",name:"address",error:e(s).address},{default:r(()=>[o(y,{modelValue:e(V),"onUpdate:modelValue":d[11]||(d[11]=_=>R(V)?V.value=_:null)},null,8,["modelValue"])]),_:1},8,["error"]),j("div",fo,[o(U,{label:"Emergency Contact Name",name:"emergency_contact_name",error:e(s).emergency_contact_name,ui:{wrapper:"md:w-full"}},{default:r(()=>[o(y,{modelValue:e(l).emergency_contact_name,"onUpdate:modelValue":d[12]||(d[12]=_=>e(l).emergency_contact_name=_)},null,8,["modelValue"])]),_:1},8,["error"]),o(U,{label:"Emergency Contact Phone",name:"emergency_contact_phone",error:e(s).emergency_contact_phone,ui:{wrapper:"md:w-1/2"}},{default:r(()=>[o(Ke,{orient:"horizontal",ui:{wrapper:{horizontal:"w-full"}}},{default:r(()=>[o(y,{modelValue:e(l).emergency_contact_phone,"onUpdate:modelValue":d[13]||(d[13]=_=>e(l).emergency_contact_phone=_),class:"flex-1"},null,8,["modelValue"]),o(Ze,{text:"Can accept Mobile Number or Landline Number",popper:{arrow:!0}},{default:r(()=>[o(Z,{icon:"i-heroicons-information-circle",color:"yellow"})]),_:1})]),_:1})]),_:1},8,["error"])]),o(Z,{type:"submit",variant:"outline",loading:e(q),disabled:!e(ee)},{default:r(()=>d[14]||(d[14]=[F(" Update ")])),_:1},8,["loading","disabled"])]),_:1},8,["schema","state"])]),_:1})}}}),_o=Y({__name:"DeleteModal",props:{member:Object},emits:["reloadTable","success","error","close"],setup(t,{emit:m}){const u=de(),{loading:p,hasError:q}=O(u),s=t,g=m,h=()=>g("close"),v=()=>{g("success"),g("reloadTable"),h()},w=()=>{g("error")},$=async()=>{var S;if(await u.deleteMember((S=s.member)==null?void 0:S.id),q.value){w();return}v()};return(S,a)=>{var D;const n=ce,z=me;return C(),le(z,{"on-close":h,title:`Delete ${(D=s.member)==null?void 0:D.full_name}`,ui:{width:"md:max-w-1xl"}},{default:r(()=>[a[1]||(a[1]=j("p",{class:"italic"},"This action cannot be undone.",-1)),a[2]||(a[2]=j("p",{class:"italic"},"All data associated with this member will be deleted.",-1)),o(n,{variant:"solid",color:"red",class:"w-full justify-center mt-4",ui:{base:"text-center"},onClick:$,loading:e(p)},{default:r(()=>a[0]||(a[0]=[F(" Delete this member ")])),_:1},8,["loading"])]),_:1},8,["title"])}}}),Mo=Y({__name:"index",setup(t){Ft({title:"Members"});const m=Rt(),{actionToastResult:u}=Ut(),p=de(),{members:q,loading:s,page:g,pageCount:h,search:v,sort:w,totalMembers:$,selectedStatus:S}=O(p),{columns:a,items:n,expandableDetails:z}=Pt;p.getMembers();const D=()=>{m.open(lo,{onReloadTable(){p.getMembers()},onSuccess(){u({icon:"i-heroicons-check-circle",description:"Member created successfully.",id:"modal-success",color:"green"})},onError(){u({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onClose(){m.close()}})},B=l=>{m.open(bo,{member:l,onReloadTable(){p.getMembers()},onSuccess(){u({icon:"i-heroicons-check-circle",description:"Member updated successfully.",id:"modal-success",color:"green"})},onError(){u({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onNoDataChange(){u({icon:"i-heroicons-exclamation-circle",description:"No data changes detected.",id:"modal-warning",color:"yellow"})},onClose(){m.close()}})},A=l=>{m.open(_o,{member:l,onReloadTable(){p.getMembers()},onSuccess(){u({icon:"i-heroicons-check-circle",description:"Member deleted.",id:"modal-success",color:"green"})},onError(){u({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onClose(){m.close()}})};return ae(v,()=>{g.value=1,p.getMembers()}),ae(h,()=>{g.value=1,p.getMembers()}),ae([g,h],()=>{p.getMembers()}),ae(S,()=>{g.value=1,p.getMembers()}),(l,E)=>{const G=Ct;return C(),N("div",null,[o(G,{"module-title":"Members",columns:e(a),"table-data":e(q),"is-expandable":!0,"action-items":e(n),"add-data-modal":D,loading:e(s),"action-handlers":{edit:B,delete:A},pagination:{page:e(g),pageCount:e(h),total:e($)},sorting:e(w),search:e(v),"enable-dropdown-filter":!1,"expandable-details":e(z),"onUpdate:page":E[0]||(E[0]=b=>g.value=b),"onUpdate:pageCount":E[1]||(E[1]=b=>h.value=b),"onUpdate:sort":e(p).getMembers,"onUpdate:search":E[2]||(E[2]=b=>v.value=b),"onUpdate:selectedDropdownFilter":E[3]||(E[3]=b=>S.value=b)},null,8,["columns","table-data","action-items","loading","action-handlers","pagination","sorting","search","expandable-details","onUpdate:sort"])])}}});export{Mo as default};
